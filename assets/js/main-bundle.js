"use strict";var _common={scrollLock:function(){fesdDB.is.isMobile4?bodyScroll.lock():$("body").css("overflow","hidden")},scrollUnlock:function(){$(".pop-template").hasClass("show")||(fesdDB.is.isMobile4?bodyScroll.unlock():$("body").attr("style",""))},backendBind:function(){_common.blazyInit(),$("[data-aost]").aost4(),$("[data-anchor]").anchor4()},blazyInit:function(){window.bLazy.revalidate()},navScroll:function(){var c=$("body").attr("data-page"),e=$(".main-nav"),n=$("aside.reverse"),i="home"!==c?e.outerHeight()+100:$(".banner").outerHeight(),t=$("footer").offset().top-window.innerHeight;$(window).on("scroll load",function(){var c=$(this).scrollTop();c>e.outerHeight()?e.addClass("fixed"):e.removeClass("fixed"),i<=c&&c<t?(e.addClass("active"),n.addClass("active")):(t<=c||e.removeClass("active"),n.removeClass("active"))})},menuCall:function(){var c=$(".main-menu"),e=window.Scrollbar,n={continuousScrolling:!1,damping:.1};$(".menu-btn").on("click",function(){c.hasClass("block")||(c.addClass("block"),_common.blazyInit(),_common.scrollLock(),setTimeout(function(){c.addClass("show")},200),$(".main-menu .scrollbar").hasClass("bind")||(e.init(document.querySelector(".main-menu .scrollbar:not(.bind)"),n),$(".main-menu .scrollbar").addClass("bind")))}),c.find(".close-btn").on("click",function(){c.removeClass("show"),setTimeout(function(){c.removeClass("block"),_common.scrollUnlock()},800)})},otherCall:function(){var n=0!==$(".pop-template").length,i=void 0;i=n?$(".pop-template, .cookie-template"):$(".cookie-template");_common.isFirstIn()?(i.addClass("block"),setTimeout(function(){i.addClass("show"),function(){var c=$(".swiper-box.pop .swiper-slide"),e={speed:1e3,pagination:{el:".swiper-box.pop .swiper-pagination",clickable:!0,dynamicBullets:getSlideType(c)},autoplay:{delay:6500},lazy:{loadPrevNext:!0},loop:!0,effect:"fade",fadeEffect:{crossFade:!0},on:{init:function(){getSlidesCount(this)}}};new Swiper(".swiper-box.pop .swiper-container",e);i.find(".close").on("click",function(){var c=this;$(this).parents(".full-template").removeClass("show"),setTimeout(function(){$(c).parents(".full-template").remove()},600),n&&_common.scrollUnlock()}),n&&_common.scrollLock()}()},100)):i.remove()},isFirstIn:function(){return null===sessionStorage.getItem("firstIn")},loadTemplate:function(){var c=$("body").attr("data-link-h"),e=$("body").attr("data-link-f");$.ajax({url:e}).done(function(c){$("body").append(c),_common.backendBind()}),$.ajax({url:c}).done(function(c){$("body").prepend(c);var e=$("body").attr("data-nav-color");$(".main-nav").addClass(e),_common.navScroll(),_common.menuCall()})},entryShow:function(){var c=$(".entry-bg"),e="#E60012",n="#898989",i='\n          ';_common.scrollLock(),$("body").append(i),setTimeout(function(){$(".entry-outer").addClass("active")},50),setTimeout(function(){$(".entry-outer").addClass("remove"),_common.scrollUnlock()},5e3),setTimeout(function(){$(".entry-outer").remove(),$(".entry-bg").remove()},5500)}},_home={banner:function(){var c=function(c){var e=$(c.$el).find(".swiper-slide-active").attr("data-color"),n=$(c.$el).parent().find(".swiper-pagination"),i=$(".main-nav, .home-banner .home-news-box, .home-banner .hollow-btn");"white"===e?(n.addClass("white"),i.addClass("white")):(n.removeClass("white"),i.removeClass("white"))},e=$(".swiper-box.banner .swiper-slide"),n={speed:900,autoplay:{delay:7e3},loop:!0,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".swiper-box.banner .swiper-pagination",clickable:!0,dynamicBullets:getSlideType(e)},lazy:{loadPrevNext:!0},on:{init:function(){getSlidesCount(this),c(this)},slideChangeTransitionStart:function(){c(this)}}};new Swiper(".swiper-box.banner .swiper-container",n)},news:function(){new Swiper(".swiper-box.news .swiper-container",{speed:700,autoplay:{delay:1500},loop:!0,effect:"fade",fadeEffect:{crossFade:!0},on:{init:function(){getSlidesCount(this),$(this.$el).addClass("swiper-no-swiping")}}})},activity:function(){var c=$(".swiper-box.activity .swiper-slide"),e={autoplay:{delay:7e3},speed:900,pagination:{el:1200<window.innerWidth?".swiper-box.activity .swiper-pagination.desk":".swiper-box.activity .swiper-pagination.mob",clickable:!0,dynamicBullets:getSlideType(c)},loop:!0,centeredSlides:!0,navigation:{nextEl:".swiper-box.activity .swiper-right",prevEl:".swiper-box.activity .swiper-left"},lazy:{loadPrevNext:!0},on:{init:function(){getSlidesCount(this)},slideChangeTransitionStart:function(){$(this.$el).find(".hover-item").hide()},slideChangeTransitionEnd:function(){$(this.$el).find(".hover-item").show()}},breakpoints:{300:{slidesPerView:1},1201:{slidesPerView:3}}};c.length<3&&1201<=window.innerWidth&&(e.loop=!1,e.centeredSlides=!1,c.parents(".swiper-wrapper").css("justify-content","center"),c.parents(".swiper-container").addClass("no-loop")),window.innerWidth<=1200&&(e.effect="fade",e.fadeEffect={crossFade:!0});new Swiper(".swiper-box.activity .swiper-container",e);c.parents(".swiper-no-swiping").length&&1201<=window.innerWidth&&c.addClass("swiper-slide-active")},explore:function(){var c=$(".swiper-box.explore .swiper-slide"),e={autoplay:{delay:7e3},speed:900,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:1200<window.innerWidth?".swiper-box.explore .swiper-pagination.desk":".swiper-box.explore .swiper-pagination.mob",clickable:!0,dynamicBullets:getSlideType(c)},loop:!0,navigation:{nextEl:".swiper-box.explore .swiper-right",prevEl:".swiper-box.explore .swiper-left"},lazy:{loadPrevNext:!0},on:{init:function(){getSlidesCount(this)}}};new Swiper(".swiper-box.explore .swiper-container",e)},init:function(){this.banner(),this.news(),this.activity(),this.explore()}},_dishesDetail={turnBook:function(){var t=this,n=$(".flipbook-container"),o=$("#flipbook"),a=n.find(".swiper-left"),s=n.find(".swiper-right"),l=n.find("img"),r=l.length,c=$(".flipbook-container div.page");if(r<=1)return $(".dot-container").remove(),l.each(function(c,e){var n=$(e).attr("data-self-src");$(e).prop("src",n)}),s.hide(),a.hide(),void(769<window.innerWidth&&c.css({width:c.innerWidth()/2,margin:"0 auto"}));setTimeout(function(){l.each(function(c,e){if(1===c||2===c){var n=$(e).attr("data-self-src");$(e).prop("src",n)}})},0),t.makeDot(),o.turn({gradients:!0,page:2,duration:1e3}),window.innerWidth<=768?(2===r&&s.addClass("hide"),o.turn("display","single")):(2!==r&&3!==r||s.addClass("hide"),o.turn("display","double")),o.bind("turning",function(c,e,n){var i=o.turn("pages");1===e?(a.addClass("hide"),s.removeClass("hide")):n[1]===i||n[0]===i?(s.addClass("hide"),a.removeClass("hide")):(a.removeClass("hide"),3===r?s.addClass("hide"):s.removeClass("hide")),l.last().hasClass("img-loaded")||l.each(function(c,e){var n=$(e).attr("data-self-src");$(e).prop("src",n),$(e).addClass("img-loaded")}),window.innerWidth<=768?t.dotChange(e):1===e?t.dotChange(e):t.dotChange(n[0])}),a.on("click",function(){o.turn("previous")}),s.on("click",function(){o.turn("next")}),$(window).on("resize",function(){var c=n.innerWidth(),e=n.innerHeight();o.turn("size",c,e),window.innerWidth<=768?o.turn("display","single"):o.turn("display","double")}),o.bind("start",function(c,e,n){"tl"!=n&&"tr"!=n&&"bl"!=n&&"br"!=n||window.innerWidth<=1024&&c.preventDefault()}),o.bind("end",function(c,e,n){"tl"===n&&"tr"===n&&"bl"===n&&"br"===n||window.innerWidth<=1024&&c.preventDefault()});var e=new Hammer(n.find(".flipbook-outer")[0]);e.on("swipeleft",function(c){o.turn("next")}),e.on("swiperight",function(c){o.turn("previous")}),$(".dot-wrap .dot").on("click",function(){var c=Number($(this).attr("data-index"));t.dotChange(c),o.turn("page",c)})},makeDot:function(){var c=$(".flipbook-container img").length,e=$(".dot-wrap");if(window.innerWidth<=768)for(var n=0;n<c;n++)e.append('<div class="dot" data-index='+(n+1)+"></div>"),1===n&&$(".dot[data-index="+(n+1)+"]").addClass("active");else for(var i=Math.floor(c/2)+1,t=0,o=0;o<i;o++)0!==o?(t+=2,e.append('<div class="dot" data-index='+t+"></div>")):0===o&&e.append('<div class="dot" data-index=1></div>'),1===o&&$(".dot[data-index="+t+"]").addClass("active")},dotChange:function(c){$(".dot-wrap .dot[data-index="+c+"]").length&&($(".dot-wrap .dot").removeClass("active"),$(".dot-wrap .dot[data-index="+c+"]").addClass("active"))}},_about={swiper:function(c){var e=c,n=$(e+" .swiper-slide"),i={autoplay:{delay:8e3},speed:900,pagination:{el:e+" .swiper-pagination",clickable:!0,dynamicBullets:getSlideType(n)},loop:!0,on:{init:function(){getSlidesCount(this)}}};new Swiper(e+" .swiper-container",i)},barbaPage:function(){setTimeout(function(){$(".main-header, footer, .main-menu, .pop-template, .cookie-template").attr("data-barba-prevent","all")},250),barba.init({prefetchIgnore:!0,transitions:[{name:"default-transition",enter:function(c){var e=$(c.current.container).attr("data-barba-namespace"),n=$(c.next.container).attr("data-barba-namespace");$(".chose-button[page-target="+e+"]").removeClass("active"),$(".chose-button[page-target="+n+"]").addClass("active"),_about.init(),$("[video-id]").length&&$("[video-id]").video4()}}]})},init:function(){this.swiper(".affirm"),this.swiper(".arts"),_common.backendBind()}},readyFunction={checkFunction:function checkFunction(){var functionName=$("body").attr("data-page");readyFunction.common(functionName),void 0!==functionName&&eval("readyFunction."+functionName+"();")},common:function(c){console.log("Now page is "+c+"!"),"isMacOS"===fesdDB.is.isOs4&&$("html").addClass("isMac"),"isMacOS"!==fesdDB.is.isOs4&&"isIE"!==fesdDB.is.isBrowser4&&$("html").addClass("scrollbarStyle"),_common.isFirstIn()&&_common.entryShow(),window.bLazy=new Blazy({offset:400}),$(window).on("resize load",function(){_common.blazyInit()}),appleDebug(),fixMobile100vh(),_common.loadTemplate(),_common.backendBind(),_common.otherCall(),sessionStorage.setItem("firstIn","true")},home:function(){_home.init()},dishesDetail:function(){_dishesDetail.turnBook()},aboutFeast:function(){_about.barbaPage(),_about.init()},aboutCharitable:function(){_about.barbaPage(),_about.init()},aboutBrand:function(){_about.barbaPage(),_about.init()},news:function(){},newsDetail:function(){},dishes:function(){},store:function(){},storeDetail:function(){},contact:function(){},member:function(){},noPage:function(){}};$(document).ready(function(){readyFunction.checkFunction()});